basePath: /
definitions:
  dto.CombinedPositionItem:
    properties:
      date:
        type: string
      id:
        type: integer
      keyword:
        type: string
      keyword_id:
        type: integer
      positions:
        description: Позиции из Google/Yandex - массив позиций
        items:
          $ref: '#/definitions/dto.PositionData'
        type: array
      site_id:
        type: integer
      wordstat:
        allOf:
        - $ref: '#/definitions/dto.PositionData'
        description: Wordstat позиции - отдельный ключ
    type: object
  dto.CombinedPositionsResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/dto.CombinedPositionItem'
        type: array
      meta:
        $ref: '#/definitions/dto.MetaInfo'
      pagination:
        $ref: '#/definitions/dto.PaginationInfo'
    type: object
  dto.CreateKeywordRequest:
    properties:
      site_id:
        type: integer
      value:
        type: string
    required:
    - site_id
    - value
    type: object
  dto.CreateSiteRequest:
    properties:
      domain:
        type: string
    required:
    - domain
    type: object
  dto.DeleteKeywordResponse:
    properties:
      message:
        type: string
    type: object
  dto.DeleteSiteResponse:
    properties:
      message:
        type: string
    type: object
  dto.ErrorResponse:
    properties:
      error:
        type: string
      message:
        type: string
    type: object
  dto.KeywordResponse:
    properties:
      id:
        type: integer
      site_id:
        type: integer
      value:
        type: string
    type: object
  dto.MetaInfo:
    properties:
      cached:
        type: boolean
      query_time_ms:
        type: integer
    type: object
  dto.PaginationInfo:
    properties:
      current_page:
        type: integer
      from:
        type: integer
      has_more:
        type: boolean
      last_page:
        type: integer
      per_page:
        type: integer
      to:
        type: integer
      total:
        type: integer
    type: object
  dto.PositionData:
    properties:
      date:
        type: string
      rank:
        type: integer
      source:
        type: string
    type: object
  dto.PositionDistribution:
    properties:
      not_found:
        type: integer
      top_3:
        type: integer
      top_10:
        type: integer
      top_20:
        type: integer
    type: object
  dto.PositionHistoryItem:
    properties:
      country:
        type: string
      date:
        type: string
      device:
        type: string
      id:
        type: integer
      keyword:
        type: string
      keyword_id:
        type: integer
      lang:
        type: string
      position:
        type: integer
      rank:
        type: integer
      site_id:
        type: integer
      source:
        type: string
    type: object
  dto.PositionHistoryResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/dto.PositionHistoryItem'
        type: array
      meta:
        $ref: '#/definitions/dto.MetaInfo'
      pagination:
        $ref: '#/definitions/dto.PaginationInfo'
    type: object
  dto.PositionRanges:
    properties:
      "1_3":
        type: integer
      "4_10":
        type: integer
      "11_30":
        type: integer
      "31_50":
        type: integer
      "51_100":
        type: integer
      100_plus:
        type: integer
    type: object
  dto.PositionResponse:
    properties:
      ads:
        type: boolean
      country:
        type: string
      date:
        type: string
      device:
        type: string
      id:
        type: integer
      keyword:
        type: string
      keyword_id:
        type: integer
      lang:
        type: string
      os:
        type: string
      pages:
        type: integer
      rank:
        type: integer
      site:
        type: string
      site_id:
        type: integer
      source:
        type: string
      title:
        type: string
      url:
        type: string
    type: object
  dto.PositionStatisticsRequest:
    properties:
      date_from:
        type: string
      date_to:
        type: string
      site_id:
        type: integer
      source:
        enum:
        - google
        - yandex
        - wordstat
        type: string
    required:
    - date_from
    - date_to
    - site_id
    - source
    type: object
  dto.PositionStatisticsResponse:
    properties:
      keywords_count:
        type: integer
      not_visible:
        type: integer
      position_distribution:
        $ref: '#/definitions/dto.PositionDistribution'
      position_ranges:
        $ref: '#/definitions/dto.PositionRanges'
      total_positions:
        type: integer
      trends:
        $ref: '#/definitions/dto.Trends'
      visibility_stats:
        $ref: '#/definitions/dto.VisibilityStats'
      visible:
        type: integer
    type: object
  dto.SiteResponse:
    properties:
      domain:
        type: string
      id:
        type: integer
      keywords_count:
        type: integer
    type: object
  dto.TrackGooglePositionsRequest:
    properties:
      ads:
        type: boolean
      ai:
        description: 'Парсинг блока "Обзор от ИИ": 0 или 1'
        type: integer
      country:
        type: string
      device:
        enum:
        - desktop
        - tablet
        - mobile
        type: string
      filter:
        description: 'Скрывать похожие результаты: 0 или 1'
        type: integer
      highlights:
        description: 'Подсветка ключевых слов: 0 или 1'
        type: integer
      lang:
        type: string
      loc:
        description: ID местоположения
        type: integer
      nfpr:
        description: 'Отменить исправление запроса: 0 или 1'
        type: integer
      os:
        enum:
        - ios
        - android
        type: string
      pages:
        maximum: 10
        minimum: 1
        type: integer
      raw:
        description: 'Полный HTML код страницы: "page"'
        type: string
      site_id:
        type: integer
      subdomains:
        type: boolean
      tbs:
        description: Google-specific parameters
        type: string
      xml_api_key:
        type: string
      xml_base_url:
        type: string
      xml_user_id:
        type: string
    required:
    - site_id
    type: object
  dto.TrackPositionsResponse:
    properties:
      count:
        type: integer
      message:
        type: string
    type: object
  dto.TrackWordstatPositionsRequest:
    properties:
      regions:
        description: ID региона Яндекса, nullable
        type: integer
      site_id:
        type: integer
      xml_api_key:
        type: string
      xml_base_url:
        type: string
      xml_user_id:
        type: string
    required:
    - site_id
    type: object
  dto.TrackYandexPositionsRequest:
    properties:
      ads:
        type: boolean
      country:
        type: string
      device:
        enum:
        - desktop
        - tablet
        - mobile
        type: string
      filter:
        description: 'Скрывать похожие результаты: 0 или 1'
        type: integer
      groupby:
        description: Yandex-specific parameters
        type: integer
      highlights:
        description: 'Подсветка ключевых слов: 0 или 1'
        type: integer
      inindex:
        description: 'Проверка индексации: 0 или 1'
        type: integer
      lang:
        type: string
      lr:
        description: ID региона Яндекса
        type: integer
      os:
        enum:
        - ios
        - android
        type: string
      pages:
        maximum: 10
        minimum: 1
        type: integer
      raw:
        description: 'Полный HTML код страницы: "page"'
        type: string
      site_id:
        type: integer
      strict:
        description: 'Режим строгого соответствия: 0 или 1'
        type: integer
      subdomains:
        type: boolean
      within:
        description: 'Фильтр по периоду: 77, 1, 2, 0'
        type: integer
      xml_api_key:
        type: string
      xml_base_url:
        type: string
      xml_user_id:
        type: string
    required:
    - site_id
    type: object
  dto.Trends:
    properties:
      declined:
        type: integer
      improved:
        type: integer
      stable:
        type: integer
    type: object
  dto.VisibilityStats:
    properties:
      avg_position:
        type: number
      best_position:
        type: integer
      median_position:
        type: integer
      worst_position:
        type: integer
    type: object
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: API для отслеживания позиций сайтов в поисковых системах
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Go SEO API
  version: "1.0"
paths:
  /api/keywords:
    get:
      description: Get list of keywords for a specific site
      parameters:
      - description: Site ID
        in: query
        name: site_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.KeywordResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get keywords by site
      tags:
      - keywords
    post:
      consumes:
      - application/json
      description: Create a new keyword for tracking
      parameters:
      - description: Keyword data
        in: body
        name: keyword
        required: true
        schema:
          $ref: '#/definitions/dto.CreateKeywordRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.KeywordResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create a new keyword
      tags:
      - keywords
  /api/keywords/{id}:
    delete:
      description: Delete a keyword and all its tracking data
      parameters:
      - description: Keyword ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.DeleteKeywordResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Delete a keyword
      tags:
      - keywords
  /api/positions/combined:
    get:
      description: Get combined positions data from Google/Yandex and Wordstat sources
        with pagination support
      parameters:
      - description: Site ID
        in: query
        name: site_id
        required: true
        type: integer
      - description: Source filter (optional) - google or yandex
        enum:
        - google
        - yandex
        in: query
        name: source
        type: string
      - description: Include Wordstat data (optional) - true or false
        in: query
        name: wordstat
        type: boolean
      - description: Start date filter (optional) - YYYY-MM-DD format
        in: query
        name: date_from
        type: string
      - description: End date filter (optional) - YYYY-MM-DD format
        in: query
        name: date_to
        type: string
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Items per page (default: 50, max: 100)'
        in: query
        name: per_page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.CombinedPositionsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get combined positions with pagination
      tags:
      - positions
  /api/positions/history:
    get:
      description: Get positions history for specific site and optional keyword with
        pagination support
      parameters:
      - description: Site ID
        in: query
        name: site_id
        required: true
        type: integer
      - description: Keyword ID (optional)
        in: query
        name: keyword_id
        type: integer
      - description: Source filter (optional) - google, yandex or wordstat
        enum:
        - google
        - yandex
        - wordstat
        in: query
        name: source
        type: string
      - description: Start date filter (optional) - YYYY-MM-DD format
        in: query
        name: date_from
        type: string
      - description: End date filter (optional) - YYYY-MM-DD format
        in: query
        name: date_to
        type: string
      - description: Get only latest data for each keyword (optional) - true or false
        in: query
        name: last
        type: boolean
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Items per page (default: 50, max: 100)'
        in: query
        name: per_page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.PositionHistoryResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get positions history with pagination
      tags:
      - positions
  /api/positions/latest:
    get:
      description: Get latest positions for all sites and keywords
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.PositionResponse'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get latest positions
      tags:
      - positions
  /api/positions/statistics:
    post:
      consumes:
      - application/json
      description: Get position statistics for specific site and source within date
        range
      parameters:
      - description: Statistics parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.PositionStatisticsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.PositionStatisticsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get position statistics
      tags:
      - positions
  /api/positions/track-google:
    post:
      consumes:
      - application/json
      description: Track Google positions for specific site and its keywords. Can
        include subdomains in search.
      parameters:
      - description: Google tracking parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.TrackGooglePositionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.TrackPositionsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Track Google positions for specific site
      tags:
      - positions
  /api/positions/track-wordstat:
    post:
      consumes:
      - application/json
      description: Track Wordstat positions for specific site and its keywords.
      parameters:
      - description: Wordstat tracking parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.TrackWordstatPositionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.TrackPositionsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Track Wordstat positions for specific site
      tags:
      - positions
  /api/positions/track-yandex:
    post:
      consumes:
      - application/json
      description: Track Yandex positions for specific site and its keywords. Can
        include subdomains in search.
      parameters:
      - description: Yandex tracking parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.TrackYandexPositionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.TrackPositionsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Track Yandex positions for specific site
      tags:
      - positions
  /api/sites:
    get:
      description: Get list of tracked sites. If ids parameter is provided, returns
        only sites with specified IDs
      parameters:
      - description: Comma-separated list of site IDs to filter by
        in: query
        name: ids
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.SiteResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get sites
      tags:
      - sites
    post:
      consumes:
      - application/json
      description: Create a new site for tracking
      parameters:
      - description: Site data
        in: body
        name: site
        required: true
        schema:
          $ref: '#/definitions/dto.CreateSiteRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.SiteResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create a new site
      tags:
      - sites
  /api/sites/{id}:
    delete:
      description: Delete a site and all its tracking data
      parameters:
      - description: Site ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.DeleteSiteResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Delete a site
      tags:
      - sites
swagger: "2.0"

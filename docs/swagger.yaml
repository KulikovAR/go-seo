definitions:
  dto.CreateKeywordRequest:
    properties:
      site_id:
        type: integer
      value:
        type: string
    required:
    - site_id
    - value
    type: object
  dto.CreateSiteRequest:
    properties:
      domain:
        type: string
    required:
    - domain
    type: object
  dto.DeleteKeywordResponse:
    properties:
      message:
        type: string
    type: object
  dto.DeleteSiteResponse:
    properties:
      message:
        type: string
    type: object
  dto.ErrorResponse:
    properties:
      error:
        type: string
      message:
        type: string
    type: object
  dto.KeywordResponse:
    properties:
      id:
        type: integer
      site_id:
        type: integer
      value:
        type: string
    type: object
  dto.MetaInfo:
    properties:
      cached:
        type: boolean
      query_time_ms:
        type: integer
    type: object
  dto.PaginationInfo:
    properties:
      current_page:
        type: integer
      from:
        type: integer
      has_more:
        type: boolean
      last_page:
        type: integer
      per_page:
        type: integer
      to:
        type: integer
      total:
        type: integer
    type: object
  dto.SiteResponse:
    properties:
      domain:
        type: string
      id:
        type: integer
      keywords_count:
        type: integer
    type: object
  dto.TrackingJobItem:
    properties:
      completed_at:
        type: string
      completed_tasks:
        type: integer
      created_at:
        type: string
      error:
        type: string
      failed_tasks:
        type: integer
      id:
        type: string
      progress:
        description: Процент выполнения
        type: number
      site_id:
        type: integer
      source:
        type: string
      status:
        type: string
      total_tasks:
        type: integer
      updated_at:
        type: string
    type: object
  dto.TrackingJobsResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/dto.TrackingJobItem'
        type: array
      meta:
        $ref: '#/definitions/dto.MetaInfo'
      pagination:
        $ref: '#/definitions/dto.PaginationInfo'
    type: object
info:
  contact: {}
paths:
  /api/keywords:
    get:
      description: Get list of keywords for a specific site
      parameters:
      - description: Site ID
        in: query
        name: site_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.KeywordResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get keywords by site
      tags:
      - keywords
    post:
      consumes:
      - application/json
      description: Create a new keyword for tracking
      parameters:
      - description: Keyword data
        in: body
        name: keyword
        required: true
        schema:
          $ref: '#/definitions/dto.CreateKeywordRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.KeywordResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create a new keyword
      tags:
      - keywords
  /api/keywords/{id}:
    delete:
      description: Delete a keyword and all its tracking data
      parameters:
      - description: Keyword ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.DeleteKeywordResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Delete a keyword
      tags:
      - keywords
  /api/sites:
    get:
      description: Get list of tracked sites. If ids parameter is provided, returns
        only sites with specified IDs
      parameters:
      - description: Comma-separated list of site IDs to filter by
        in: query
        name: ids
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.SiteResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get sites
      tags:
      - sites
    post:
      consumes:
      - application/json
      description: Create a new site for tracking
      parameters:
      - description: Site data
        in: body
        name: site
        required: true
        schema:
          $ref: '#/definitions/dto.CreateSiteRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.SiteResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create a new site
      tags:
      - sites
  /api/sites/{id}:
    delete:
      description: Delete a site and all its tracking data
      parameters:
      - description: Site ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.DeleteSiteResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Delete a site
      tags:
      - sites
  /api/tracking-jobs:
    get:
      consumes:
      - application/json
      description: Возвращает постраничный список джобов отслеживания позиций с возможностью
        фильтрации по сайту и статусу
      parameters:
      - description: ID сайта для фильтрации
        in: query
        name: site_id
        type: integer
      - description: Статус джоба (pending, running, completed, failed, cancelled)
        in: query
        name: status
        type: string
      - description: Номер страницы (по умолчанию 1)
        in: query
        name: page
        type: integer
      - description: Количество записей на странице (по умолчанию 20, максимум 100)
        in: query
        name: per_page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.TrackingJobsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Получить список джобов с пагинацией
      tags:
      - tracking-jobs
swagger: "2.0"

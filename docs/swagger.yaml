definitions:
  dto.CreateKeywordRequest:
    properties:
      site_id:
        type: integer
      value:
        type: string
    required:
    - site_id
    - value
    type: object
  dto.CreateSiteRequest:
    properties:
      domain:
        type: string
    required:
    - domain
    type: object
  dto.DeleteKeywordResponse:
    properties:
      message:
        type: string
    type: object
  dto.DeleteSiteResponse:
    properties:
      message:
        type: string
    type: object
  dto.ErrorResponse:
    properties:
      error:
        type: string
      message:
        type: string
    type: object
  dto.KeywordResponse:
    properties:
      id:
        type: integer
      site_id:
        type: integer
      value:
        type: string
    type: object
  dto.PositionResponse:
    properties:
      ads:
        type: boolean
      country:
        type: string
      date:
        type: string
      device:
        type: string
      id:
        type: integer
      keyword:
        type: string
      keyword_id:
        type: integer
      lang:
        type: string
      os:
        type: string
      pages:
        type: integer
      rank:
        type: integer
      site:
        type: string
      site_id:
        type: integer
      source:
        type: string
      title:
        type: string
      url:
        type: string
    type: object
  dto.SiteResponse:
    properties:
      domain:
        type: string
      id:
        type: integer
      keywords_count:
        type: integer
    type: object
  dto.TrackGooglePositionsRequest:
    properties:
      ads:
        type: boolean
      ai:
        description: 'Парсинг блока "Обзор от ИИ": 0 или 1'
        type: integer
      country:
        type: string
      device:
        enum:
        - desktop
        - tablet
        - mobile
        type: string
      domain:
        description: ID домена Google
        type: integer
      filter:
        description: 'Скрывать похожие результаты: 0 или 1'
        type: integer
      highlights:
        description: 'Подсветка ключевых слов: 0 или 1'
        type: integer
      lang:
        type: string
      loc:
        description: ID местоположения
        type: integer
      nfpr:
        description: 'Отменить исправление запроса: 0 или 1'
        type: integer
      os:
        enum:
        - ios
        - android
        type: string
      pages:
        maximum: 10
        minimum: 1
        type: integer
      raw:
        description: 'Полный HTML код страницы: "page"'
        type: string
      site_id:
        type: integer
      subdomains:
        type: boolean
      tbs:
        description: Google-specific parameters
        type: string
      xml_api_key:
        type: string
      xml_base_url:
        type: string
      xml_user_id:
        type: string
    required:
    - device
    - pages
    - site_id
    type: object
  dto.TrackPositionsResponse:
    properties:
      count:
        type: integer
      message:
        type: string
    type: object
  dto.TrackWordstatPositionsRequest:
    properties:
      site_id:
        type: integer
      xml_api_key:
        type: string
      xml_base_url:
        type: string
      xml_user_id:
        type: string
    required:
    - site_id
    type: object
  dto.TrackYandexPositionsRequest:
    properties:
      ads:
        type: boolean
      country:
        type: string
      device:
        enum:
        - desktop
        - tablet
        - mobile
        type: string
      domain:
        description: 'Домен Яндекса: ru, com, ua, com.tr, by, kz'
        type: string
      filter:
        description: 'Скрывать похожие результаты: 0 или 1'
        type: integer
      groupby:
        description: Yandex-specific parameters
        type: integer
      highlights:
        description: 'Подсветка ключевых слов: 0 или 1'
        type: integer
      inindex:
        description: 'Проверка индексации: 0 или 1'
        type: integer
      lang:
        type: string
      lr:
        description: ID региона Яндекса
        type: integer
      os:
        enum:
        - ios
        - android
        type: string
      pages:
        maximum: 10
        minimum: 1
        type: integer
      raw:
        description: 'Полный HTML код страницы: "page"'
        type: string
      site_id:
        type: integer
      strict:
        description: 'Режим строгого соответствия: 0 или 1'
        type: integer
      subdomains:
        type: boolean
      within:
        description: 'Фильтр по периоду: 77, 1, 2, 0'
        type: integer
      xml_api_key:
        type: string
      xml_base_url:
        type: string
      xml_user_id:
        type: string
    required:
    - device
    - pages
    - site_id
    type: object
info:
  contact: {}
paths:
  /api/keywords:
    get:
      description: Get list of keywords for a specific site
      parameters:
      - description: Site ID
        in: query
        name: site_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.KeywordResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get keywords by site
      tags:
      - keywords
    post:
      consumes:
      - application/json
      description: Create a new keyword for tracking
      parameters:
      - description: Keyword data
        in: body
        name: keyword
        required: true
        schema:
          $ref: '#/definitions/dto.CreateKeywordRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.KeywordResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create a new keyword
      tags:
      - keywords
  /api/keywords/{id}:
    delete:
      description: Delete a keyword and all its tracking data
      parameters:
      - description: Keyword ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.DeleteKeywordResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Delete a keyword
      tags:
      - keywords
  /api/positions/history:
    get:
      description: Get positions history for specific site and optional keyword
      parameters:
      - description: Site ID
        in: query
        name: site_id
        required: true
        type: integer
      - description: Keyword ID (optional)
        in: query
        name: keyword_id
        type: integer
      - description: Source filter (optional) - google, yandex or wordstat
        enum:
        - google
        - yandex
        - wordstat
        in: query
        name: source
        type: string
      - description: Start date filter (optional) - YYYY-MM-DD format
        in: query
        name: date_from
        type: string
      - description: End date filter (optional) - YYYY-MM-DD format
        in: query
        name: date_to
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.PositionResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get positions history
      tags:
      - positions
  /api/positions/latest:
    get:
      description: Get latest positions for all sites and keywords
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.PositionResponse'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get latest positions
      tags:
      - positions
  /api/positions/track-google:
    post:
      consumes:
      - application/json
      description: Track Google positions for specific site and its keywords. Can
        include subdomains in search.
      parameters:
      - description: Google tracking parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.TrackGooglePositionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.TrackPositionsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Track Google positions for specific site
      tags:
      - positions
  /api/positions/track-wordstat:
    post:
      consumes:
      - application/json
      description: Track Wordstat positions for specific site and its keywords.
      parameters:
      - description: Wordstat tracking parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.TrackWordstatPositionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.TrackPositionsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Track Wordstat positions for specific site
      tags:
      - positions
  /api/positions/track-yandex:
    post:
      consumes:
      - application/json
      description: Track Yandex positions for specific site and its keywords. Can
        include subdomains in search.
      parameters:
      - description: Yandex tracking parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.TrackYandexPositionsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.TrackPositionsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Track Yandex positions for specific site
      tags:
      - positions
  /api/sites:
    get:
      description: Get list of tracked sites. If ids parameter is provided, returns
        only sites with specified IDs
      parameters:
      - description: Comma-separated list of site IDs to filter by
        in: query
        name: ids
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/dto.SiteResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Get sites
      tags:
      - sites
    post:
      consumes:
      - application/json
      description: Create a new site for tracking
      parameters:
      - description: Site data
        in: body
        name: site
        required: true
        schema:
          $ref: '#/definitions/dto.CreateSiteRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.SiteResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Create a new site
      tags:
      - sites
  /api/sites/{id}:
    delete:
      description: Delete a site and all its tracking data
      parameters:
      - description: Site ID
        in: path
        name: id
        required: true
        type: integer
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.DeleteSiteResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Delete a site
      tags:
      - sites
swagger: "2.0"
